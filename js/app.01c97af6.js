(function(){"use strict";var t={4890:function(t,e,i){var s=i(5130),a=i(6768),o=i(4232);const n={class:"app-container"},r={key:"start"},l={key:"grade-select"},c={key:"question"},d={key:"optimization"},u={key:"schedule"};function m(t,e,i,m,h,p){const v=(0,a.g2)("start-component"),b=(0,a.g2)("grade-select-component"),k=(0,a.g2)("question-component"),g=(0,a.g2)("optimization-component"),y=(0,a.g2)("schedule-component");return(0,a.uX)(),(0,a.CE)("div",n,[(0,a.bF)(s.eB,{name:"fade",mode:"out-in"},{default:(0,a.k6)((()=>["start"===h.currentView?((0,a.uX)(),(0,a.CE)("div",r,[(0,a.bF)(v,{onStartClicked:p.showGradeSelect},null,8,["onStartClicked"])])):"grade-select"===h.currentView?((0,a.uX)(),(0,a.CE)("div",l,[(0,a.bF)(b,{initialGrade:h.grade,initialCredits:h.desiredCredits,onInfoSubmitted:p.handleInfoSubmission},null,8,["initialGrade","initialCredits","onInfoSubmitted"])])):"question"===h.currentView?((0,a.uX)(),(0,a.CE)("div",c,[(0,a.bF)(k,{onAnswer:p.handleAnswer,questionNumber:h.currentQuestionIndex+1,totalQuestions:h.questions.length},{question:(0,a.k6)((()=>[(0,a.eW)((0,o.v_)(p.currentQuestion),1)])),_:1},8,["onAnswer","questionNumber","totalQuestions"])])):"optimization"===h.currentView?((0,a.uX)(),(0,a.CE)("div",d,[(0,a.bF)(g,{"simulation-time":1e4,"optimization-data":{grade:h.grade,desired_credits:h.desiredCredits,user_morning:p.getAnswerFor(0),user_late:p.getAnswerFor(1),user_lunch:p.getAnswerFor(2),user_dayoff:p.getAnswerFor(3),user_no_large_gap:p.getAnswerFor(4)},onOptimizationCompleted:p.showSchedule},null,8,["optimization-data","onOptimizationCompleted"])])):"schedule"===h.currentView?((0,a.uX)(),(0,a.CE)("div",u,[(0,a.bF)(y,{scheduleData:h.scheduleData,apiResult:h.apiResult,userPreferences:h.optimizationData,onRestart:p.restartApp},null,8,["scheduleData","apiResult","userPreferences","onRestart"])])):(0,a.Q3)("",!0)])),_:1})])}i(4114),i(8111),i(7588),i(8237);const h={class:"start-container"},p={class:"start-content"};function v(t,e,i,s,o,n){return(0,a.uX)(),(0,a.CE)("div",h,[(0,a.Lk)("div",p,[e[2]||(e[2]=(0,a.Lk)("h1",{class:"title"},"시간표 만들기",-1)),e[3]||(e[3]=(0,a.Lk)("p",{class:"subtitle"},"몇 가지 질문에 답하고 맞춤형 시간표를 만들어보세요",-1)),(0,a.Lk)("button",{class:"start-button",onClick:e[0]||(e[0]=(...t)=>n.onStartClick&&n.onStartClick(...t))},e[1]||(e[1]=[(0,a.Lk)("span",null,"시작하기",-1),(0,a.Lk)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[(0,a.Lk)("path",{d:"M5 12h14"}),(0,a.Lk)("path",{d:"m12 5 7 7-7 7"})],-1)]))])])}var b={name:"StartComponent",methods:{onStartClick(){this.$emit("start-clicked")}}},k=i(1241);const g=(0,k.A)(b,[["render",v],["__scopeId","data-v-122b5862"]]);var y=g;const f={class:"grade-select-container"},C={class:"grade-select-card"},L={class:"select-section"},w={class:"button-group"},z=["onClick"],S={class:"select-section"},E={class:"credits-slider"},_={class:"credits-value"},I=["disabled"];function x(t,e,i,n,r,l){return(0,a.uX)(),(0,a.CE)("div",f,[(0,a.Lk)("div",C,[e[4]||(e[4]=(0,a.Lk)("h1",{class:"title"},"기본 정보 입력",-1)),(0,a.Lk)("div",L,[e[2]||(e[2]=(0,a.Lk)("h2",{class:"section-title"},"학년 선택",-1)),(0,a.Lk)("div",w,[((0,a.uX)(),(0,a.CE)(a.FK,null,(0,a.pI)([2,3,4],(t=>(0,a.Lk)("button",{key:t,class:(0,o.C4)(["option-button",{selected:r.grade===t}]),onClick:e=>l.selectGrade(t)},(0,o.v_)(t)+"학년 ",11,z))),64))])]),(0,a.Lk)("div",S,[e[3]||(e[3]=(0,a.Lk)("h2",{class:"section-title"},"희망 수강 학점",-1)),(0,a.Lk)("div",E,[(0,a.bo)((0,a.Lk)("input",{type:"range",min:"12",max:"21",step:"1","onUpdate:modelValue":e[0]||(e[0]=t=>r.localCredits=t),class:"slider"},null,512),[[s.Jo,r.localCredits,void 0,{number:!0}]]),(0,a.Lk)("div",_,(0,o.v_)(r.localCredits)+"학점",1)])]),(0,a.Lk)("button",{class:"action-button primary-button",disabled:!r.grade,onClick:e[1]||(e[1]=(...t)=>l.submitInfo&&l.submitInfo(...t))}," 다음으로 ",8,I)])])}var A={name:"GradeSelectComponent",props:{initialGrade:{type:Number,default:null},initialCredits:{type:Number,default:15}},data(){return{grade:this.initialGrade,localCredits:this.initialCredits}},methods:{selectGrade(t){this.grade=t},submitInfo(){this.grade&&this.$emit("info-submitted",{grade:this.grade,credits:this.localCredits})}}};const R=(0,k.A)(A,[["render",x],["__scopeId","data-v-42f36b56"]]);var O=R;const F={class:"question-container"},T={class:"question-card"},X={class:"progress-bar"},D={class:"question-content"},M={class:"question-number"},Q={class:"question-block"},$={class:"button-group"};function j(t,e,i,s,n,r){return(0,a.uX)(),(0,a.CE)("div",F,[(0,a.Lk)("div",T,[(0,a.Lk)("div",X,[(0,a.Lk)("div",{class:"progress",style:(0,o.Tr)({width:`${r.progress}%`})},null,4)]),(0,a.Lk)("div",D,[(0,a.Lk)("h2",M,"질문 "+(0,o.v_)(i.questionNumber)+"/"+(0,o.v_)(i.totalQuestions),1),(0,a.Lk)("div",Q,[(0,a.RG)(t.$slots,"question",{},(()=>[e[2]||(e[2]=(0,a.eW)("Question Block"))]),!0)])]),(0,a.Lk)("div",$,[(0,a.Lk)("button",{class:"answer-button yes-button",onClick:e[0]||(e[0]=t=>r.onAnswer(!0))},e[3]||(e[3]=[(0,a.Lk)("span",{class:"button-text"},"예",-1),(0,a.Lk)("span",{class:"button-icon"},"✓",-1)])),(0,a.Lk)("button",{class:"answer-button no-button",onClick:e[1]||(e[1]=t=>r.onAnswer(!1))},e[4]||(e[4]=[(0,a.Lk)("span",{class:"button-text"},"아니오",-1),(0,a.Lk)("span",{class:"button-icon"},"✕",-1)]))])])])}var q={name:"QuestionComponent",props:{questionNumber:{type:Number,default:1},totalQuestions:{type:Number,default:1}},computed:{progress(){return this.questionNumber/this.totalQuestions*100}},methods:{onAnswer(t){this.$emit("answer",t)}}};const P=(0,k.A)(q,[["render",j],["__scopeId","data-v-48bb3483"]]);var W=P;const H={class:"optimization-container"},N={class:"optimization-card"},V={class:"error-hint"},G={class:"timetable-container"},U={class:"timetable"},K={class:"timetable-cell time-cell"},B=["onClick"],J={key:0,class:"cell-content"},Y={class:"cell-title"},Z={key:0,class:"cell-location"},tt={key:0,class:"selected-courses-info"},et={class:"button-stack"},it=["disabled"],st={key:0},at={key:1},ot={key:1,class:"button-container"};function nt(t,e,i,s,n,r){return(0,a.uX)(),(0,a.CE)("div",H,[(0,a.Lk)("div",N,[(0,a.Lk)("div",{class:(0,o.C4)(["status-message",{completed:n.optimizationCompleted,error:n.optimizationFailed}])},[n.optimizationCompleted&&!n.reoptimizing?((0,a.uX)(),(0,a.CE)(a.FK,{key:0},[e[4]||(e[4]=(0,a.eW)(" 최적화 완료! 당신의 맞춤형 시간표가 준비되었습니다. ")),e[5]||(e[5]=(0,a.Lk)("div",{class:"taken-course-hint"}," 시간표의 강의를 클릭하여 제외하고 다시 최적화할 수 있습니다. ",-1))],64)):n.reoptimizing?((0,a.uX)(),(0,a.CE)(a.FK,{key:1},[(0,a.eW)(" 선택한 강의를 제외하고 시간표를 다시 최적화하는 중... ")],64)):n.optimizationFailed?((0,a.uX)(),(0,a.CE)(a.FK,{key:2},[(0,a.eW)((0,o.v_)(n.statusMessage)+" ",1),(0,a.Lk)("div",V,[e[6]||(e[6]=(0,a.Lk)("p",null,"시스템 오류가 발생했습니다. 다음 방법을 시도해보세요:",-1)),e[7]||(e[7]=(0,a.Lk)("ul",null,[(0,a.Lk)("li",null,"페이지를 새로고침하고 다시 시도"),(0,a.Lk)("li",null,"다른 옵션으로 시도"),(0,a.Lk)("li",null,"문제가 지속되면 관리자에게 문의")],-1)),(0,a.Lk)("button",{class:"retry-button",onClick:e[0]||(e[0]=(...t)=>r.retryOptimization&&r.retryOptimization(...t))},"다시 시도")])],64)):((0,a.uX)(),(0,a.CE)(a.FK,{key:3},[(0,a.eW)((0,o.v_)(n.statusMessage),1)],64))],2),(0,a.Lk)("div",G,[(0,a.Lk)("div",U,[e[8]||(e[8]=(0,a.Fv)('<div class="timetable-row header-row" data-v-7a611d79><div class="timetable-cell time-header-cell" data-v-7a611d79></div><div class="timetable-cell header-cell" data-v-7a611d79>월</div><div class="timetable-cell header-cell" data-v-7a611d79>화</div><div class="timetable-cell header-cell" data-v-7a611d79>수</div><div class="timetable-cell header-cell" data-v-7a611d79>목</div><div class="timetable-cell header-cell" data-v-7a611d79>금</div></div>',1)),((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(n.timetableCells,((t,e)=>((0,a.uX)(),(0,a.CE)("div",{key:`row-${e}`,class:"timetable-row"},[(0,a.Lk)("div",K,(0,o.v_)(r.getTimeLabel(e)),1),((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(t,((t,i)=>((0,a.uX)(),(0,a.CE)("div",{key:`cell-${e}-${i}`,class:(0,o.C4)(["timetable-cell day-cell",{"selected-for-removal":t.title&&this.excludedCourses.includes(t.courseId)}]),style:(0,o.Tr)({backgroundColor:t.color,opacity:t.opacity}),onClick:e=>t.title?r.toggleCourseExclusion(t):null},[t.title?((0,a.uX)(),(0,a.CE)("div",J,[(0,a.Lk)("div",Y,(0,o.v_)(t.title),1),t.location?((0,a.uX)(),(0,a.CE)("div",Z,(0,o.v_)(t.location),1)):(0,a.Q3)("",!0)])):(0,a.Q3)("",!0)],14,B)))),128))])))),128))])]),n.excludedCourses.length>0?((0,a.uX)(),(0,a.CE)("div",tt,[(0,a.Lk)("p",null,(0,o.v_)(n.excludedCourses.length)+"개의 강의가 제외되었습니다.",1),(0,a.Lk)("div",et,[(0,a.Lk)("button",{class:"reoptimize-button",onClick:e[1]||(e[1]=(...t)=>r.reoptimizeSchedule&&r.reoptimizeSchedule(...t)),disabled:n.reoptimizing},[n.reoptimizing?((0,a.uX)(),(0,a.CE)("span",at,"재최적화 중...")):((0,a.uX)(),(0,a.CE)("span",st,"선택 강의 제외하고 재최적화"))],8,it),n.optimizationCompleted&&!n.reoptimizing?((0,a.uX)(),(0,a.CE)("button",{key:0,class:"action-button primary-button",onClick:e[2]||(e[2]=(...t)=>r.onContinue&&r.onContinue(...t))}," 시간표 확인하기 ")):(0,a.Q3)("",!0)])])):(0,a.Q3)("",!0),n.optimizationCompleted&&!n.reoptimizing&&0===n.excludedCourses.length?((0,a.uX)(),(0,a.CE)("div",ot,[(0,a.Lk)("button",{class:"action-button primary-button",onClick:e[3]||(e[3]=(...t)=>r.onContinue&&r.onContinue(...t))}," 시간표 확인하기 ")])):(0,a.Q3)("",!0)])])}i(1701);const rt={BASE_URL:"https://fd5b-210-102-204-31.ngrok-free.app",endpoints:{SCHEDULE:"/api/schedule",FEEDBACK:"/api/feedback"},getFullUrl(t){return`${this.BASE_URL}${t}`}};var lt={name:"OptimizationTimetableComponent",props:{simulationTime:{type:Number,default:1e4},optimizationData:{type:Object,default:()=>({grade:2,desired_credits:15,user_morning:!1,user_late:!1,user_lunch:!1,user_dayoff:!1,user_no_large_gap:!1})}},data(){return{optimizationInterval:null,messageChangeInterval:null,optimizationCompleted:!1,statusMessage:"시간표 최적화 진행 중...",optimizationResult:null,timetableCells:[],timeSlots:18,daysOfWeek:5,colors:["#e67e22","#e74c3c","#f1c40f","#2ecc71","#3498db","#9b59b6"],optimizationMessages:["사용자 선호도 분석 중...","과목 간 시간 배치 최적화 중...","팀플 없는 수업 고민 중...","시간대별 집중력 패턴 고려 중...","균형 잡힌 시간표 계산 중...","조성원 교수님과 상담중...","과목 선호도 반영 중...","출튀하기 좋은 수업 찾는 중...","최종 시간표 생성 중..."],optimizationFailed:!1,excludedCourses:[],reoptimizing:!1,optimizationCount:0}},mounted(){this.initTimetable(),this.startOptimizationAnimation(),this.callOptimizationAPI()},beforeUnmount(){this.stopAnimations()},methods:{initTimetable(){this.timetableCells=Array(this.timeSlots).fill().map((()=>Array(this.daysOfWeek).fill().map((()=>({color:"white",opacity:1,title:"",location:"",courseId:null,isNew:!0})))))},getTimeLabel(t){const e=Math.floor(t/2)+9,i=t%2*30;return`${e}:${0===i?"00":i}`},startOptimizationAnimation(){this.messageChangeInterval=setInterval((()=>{const t=Math.floor(Math.random()*this.optimizationMessages.length);this.statusMessage=this.optimizationMessages[t]}),2500),this.optimizationInterval=setInterval((()=>{this.updateTimetableDuringOptimization()}),200)},updateTimetableDuringOptimization(){for(let t=0;t<this.timeSlots;t++)for(let e=0;e<this.daysOfWeek;e++)if(Math.random()>.7){const i=Math.random();if(i>.8){const i=Math.floor(Math.random()*this.colors.length);this.timetableCells[t][e].color=this.colors[i],this.timetableCells[t][e].opacity=.5*Math.random()+.5}else i>.4&&(this.timetableCells[t][e].color="white",this.timetableCells[t][e].opacity=1)}},async callOptimizationAPI(){try{this.optimizationInProgress=!0;const t=rt.getFullUrl(rt.endpoints.SCHEDULE),e={...this.optimizationData,excluded_courses:this.excludedCourses};console.log(`최적화 요청 데이터 (${this.optimizationCount+1}번째 요청):`,e);const i=await fetch(t,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!i.ok)throw new Error(`API 요청 실패: ${i.status}`);this.optimizationResult=await i.json(),console.log(`최적화 결과 (${this.optimizationCount+1}번째):`,this.optimizationResult),this.optimizationCount++,setTimeout((()=>{this.completeOptimization()}),this.reoptimizing?2e3:this.simulationTime)}catch(t){console.error("API 호출 오류:",t),this.stopAnimations(),this.optimizationCompleted=!1,this.reoptimizing=!1,this.statusMessage="최적화 중 오류가 발생했습니다.",alert("시간표 최적화 중 오류가 발생했습니다. 관리자에게 문의하세요."),this.showErrorUI()}},showErrorUI(){this.optimizationResult=null,this.statusMessage="시간표 최적화에 실패했습니다.",this.optimizationFailed=!0},completeOptimization(){if(this.stopAnimations(),this.optimizationCompleted=!0,this.reoptimizing=!1,this.statusMessage="최적화 완료! 당신의 맞춤형 시간표가 준비되었습니다.",this.optimizationResult&&this.optimizationResult.selected){if(this.displayOptimizedSchedule(this.optimizationResult.selected),this.optimizationResult.excluded&&this.optimizationResult.excluded.length>0){console.log("서버에서 제외된 강의: ",this.optimizationResult.excluded);const t=this.optimizationResult.excluded.map((t=>t.subjId));this.excludedCourses=t}this.takenCoursesToRemove=[]}else this.showErrorUI()},displayOptimizedSchedule(t){this.initTimetable();let e=0;t.forEach((t=>{const i=this.colors[e%this.colors.length];e++,t.schedule_info.forEach((e=>{const s=e.day,a=e.start,o=e.end,n=e.location||"",r=this.getDayIndex(s);for(let l=a;l<=o;l++){const e=l-1;e>=0&&e<this.timeSlots&&r>=0&&r<this.daysOfWeek&&(this.timetableCells[e][r].color=i,this.timetableCells[e][r].opacity=1,this.timetableCells[e][r].title=t.name,this.timetableCells[e][r].location=n,this.timetableCells[e][r].courseId=t.subjId)}}))}))},getDayIndex(t){const e={"월":0,"화":1,"수":2,"목":3,"금":4};return void 0!==e[t]?e[t]:-1},stopAnimations(){this.optimizationInterval&&clearInterval(this.optimizationInterval),this.messageChangeInterval&&clearInterval(this.messageChangeInterval)},toggleCourseExclusion(t){if(!t.courseId)return;console.log(`토글 강의: ${t.title} (ID: ${t.courseId})`);const e=this.excludedCourses.indexOf(t.courseId);-1===e?this.excludedCourses.push(t.courseId):this.excludedCourses.splice(e,1),console.log("선택된 제외 강의:",this.excludedCourses)},reoptimizeSchedule(){0!==this.excludedCourses.length&&(this.reoptimizing=!0,this.optimizationCompleted=!1,this.statusMessage="선택한 강의를 제외하고 시간표를 다시 최적화하는 중...",console.log(`${this.excludedCourses.length}개 강의를 제외하고 재최적화 시작:`,this.excludedCourses),this.startOptimizationAnimation(),this.callOptimizationAPI())},onContinue(){this.$emit("optimization-completed",this.optimizationResult)},retryOptimization(){this.optimizationFailed=!1,this.statusMessage="시간표 최적화 진행 중...",this.startOptimizationAnimation(),this.callOptimizationAPI()}}};const ct=(0,k.A)(lt,[["render",nt],["__scopeId","data-v-7a611d79"]]);var dt=ct;const ut={class:"schedule-container"},mt={class:"schedule-card"},ht={class:"schedule-content"},pt={class:"timetable"},vt={class:"timetable-grid"},bt={class:"grid-container"},kt={class:"schedule-grid"},gt={class:"item-title"},yt={key:0,class:"item-location"},ft={key:0,class:"optimization-info"},Ct={class:"info-grid"},Lt={class:"info-card"},wt={class:"info-card"},zt={class:"info-card"},St={key:1,class:"feedback-section"},Et={class:"rating-container"},_t={class:"star-rating"},It={class:"stars"},xt=["onClick"],At={class:"feedback-form"},Rt=["disabled"],Ot={key:0,class:"feedback-error"},Ft=["disabled"],Tt={key:0},Xt={key:1},Dt={key:2,class:"feedback-success"},Mt=["disabled"],Qt={key:0},$t={key:1},jt={key:3,class:"save-notification success"},qt={key:4,class:"save-notification error"};function Pt(t,e,i,n,r,l){return(0,a.uX)(),(0,a.CE)("div",ut,[(0,a.Lk)("div",mt,[e[26]||(e[26]=(0,a.Lk)("div",{class:"schedule-header"},[(0,a.Lk)("h1",{class:"title"},"당신의 시간표는"),(0,a.Lk)("p",{class:"subtitle"},"맞춤형 일정을 확인해보세요")],-1)),(0,a.Lk)("div",ht,[(0,a.Lk)("div",pt,[e[5]||(e[5]=(0,a.Fv)('<div class="day-header" data-v-e97701b0><div class="time-slot" data-v-e97701b0></div><div class="day" data-v-e97701b0>월</div><div class="day" data-v-e97701b0>화</div><div class="day" data-v-e97701b0>수</div><div class="day" data-v-e97701b0>목</div><div class="day" data-v-e97701b0>금</div></div>',1)),(0,a.Lk)("div",vt,[(0,a.Lk)("div",bt,[e[4]||(e[4]=(0,a.Fv)('<div class="time-column" data-v-e97701b0><div class="time" data-v-e97701b0>9:00</div><div class="time" data-v-e97701b0>9:30</div><div class="time" data-v-e97701b0>10:00</div><div class="time" data-v-e97701b0>10:30</div><div class="time" data-v-e97701b0>11:00</div><div class="time" data-v-e97701b0>11:30</div><div class="time" data-v-e97701b0>12:00</div><div class="time" data-v-e97701b0>12:30</div><div class="time" data-v-e97701b0>13:00</div><div class="time" data-v-e97701b0>13:30</div><div class="time" data-v-e97701b0>14:00</div><div class="time" data-v-e97701b0>14:30</div><div class="time" data-v-e97701b0>15:00</div><div class="time" data-v-e97701b0>15:30</div><div class="time" data-v-e97701b0>16:00</div><div class="time" data-v-e97701b0>16:30</div><div class="time" data-v-e97701b0>17:00</div><div class="time" data-v-e97701b0>17:30</div></div>',1)),(0,a.Lk)("div",kt,[((0,a.uX)(),(0,a.CE)(a.FK,null,(0,a.pI)(18,(t=>(0,a.Lk)("div",{key:`grid-row-${t}`,class:"grid-row-divider",style:(0,o.Tr)({top:30*t+"px"})},null,4))),64)),((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(l.scheduleItems,((t,e)=>((0,a.uX)(),(0,a.CE)("div",{key:e,class:(0,o.C4)(["schedule-item",t.type]),style:(0,o.Tr)({gridColumn:`${t.day} / span 1`,gridRow:`${l.calculateGridRow(t.startHour,t.startMinute)} / span ${l.calculateGridSpan(t.duration)}`})},[(0,a.Lk)("span",gt,(0,o.v_)(t.title),1),t.location?((0,a.uX)(),(0,a.CE)("span",yt,(0,o.v_)(t.location),1)):(0,a.Q3)("",!0)],6)))),128))])])])])]),r.optimizationSummary?((0,a.uX)(),(0,a.CE)("div",ft,[e[18]||(e[18]=(0,a.Lk)("h2",{class:"info-title"},"최적화 정보",-1)),(0,a.Lk)("div",Ct,[(0,a.Lk)("div",Lt,[e[8]||(e[8]=(0,a.Lk)("h3",null,"과목 정보",-1)),(0,a.Lk)("p",null,[e[6]||(e[6]=(0,a.Lk)("strong",null,"총 학점:",-1)),(0,a.eW)(" "+(0,o.v_)(r.optimizationSummary.totalCredits)+"학점",1)]),(0,a.Lk)("p",null,[e[7]||(e[7]=(0,a.Lk)("strong",null,"총 과목 수:",-1)),(0,a.eW)(" "+(0,o.v_)(r.optimizationSummary.totalCourses)+"개",1)])]),(0,a.Lk)("div",wt,[e[11]||(e[11]=(0,a.Lk)("h3",null,"최적화 점수",-1)),(0,a.Lk)("p",null,[e[9]||(e[9]=(0,a.Lk)("strong",null,"목적 함수 값:",-1)),(0,a.eW)(" "+(0,o.v_)(Math.round(100*r.optimizationSummary.objectiveValue)/100),1)]),(0,a.Lk)("p",null,[e[10]||(e[10]=(0,a.Lk)("strong",null,"Priority 점수:",-1)),(0,a.eW)(" "+(0,o.v_)(r.optimizationSummary.breakdown.priority),1)])]),(0,a.Lk)("div",zt,[e[17]||(e[17]=(0,a.Lk)("h3",null,"선호도 반영",-1)),(0,a.Lk)("p",null,[e[12]||(e[12]=(0,a.Lk)("strong",null,"아침 수업:",-1)),(0,a.eW)(" "+(0,o.v_)(r.optimizationSummary.breakdown.mor),1)]),(0,a.Lk)("p",null,[e[13]||(e[13]=(0,a.Lk)("strong",null,"저녁 수업:",-1)),(0,a.eW)(" "+(0,o.v_)(r.optimizationSummary.breakdown.late),1)]),(0,a.Lk)("p",null,[e[14]||(e[14]=(0,a.Lk)("strong",null,"점심 시간대:",-1)),(0,a.eW)(" "+(0,o.v_)(r.optimizationSummary.breakdown.lunch),1)]),(0,a.Lk)("p",null,[e[15]||(e[15]=(0,a.Lk)("strong",null,"공강일:",-1)),(0,a.eW)(" "+(0,o.v_)(r.optimizationSummary.breakdown.freeday),1)]),(0,a.Lk)("p",null,[e[16]||(e[16]=(0,a.Lk)("strong",null,"긴 공강:",-1)),(0,a.eW)(" "+(0,o.v_)(r.optimizationSummary.breakdown.longgap),1)])])])])):(0,a.Q3)("",!0),r.feedbackSubmitted?((0,a.uX)(),(0,a.CE)("div",Dt,e[22]||(e[22]=[(0,a.Lk)("div",{class:"success-icon"},"✓",-1),(0,a.Lk)("h2",{class:"success-title"},"피드백이 제출되었습니다!",-1),(0,a.Lk)("p",{class:"success-message"},"소중한 의견 감사합니다.",-1)]))):((0,a.uX)(),(0,a.CE)("div",St,[e[20]||(e[20]=(0,a.Lk)("h2",{class:"feedback-title"},"시간표 피드백",-1)),e[21]||(e[21]=(0,a.Lk)("p",{class:"feedback-description"},"생성된 시간표에 대한 의견을 알려주세요!",-1)),(0,a.Lk)("div",Et,[(0,a.Lk)("div",_t,[e[19]||(e[19]=(0,a.Lk)("span",{class:"rating-label"},"만족도:",-1)),(0,a.Lk)("div",It,[((0,a.uX)(),(0,a.CE)(a.FK,null,(0,a.pI)(5,(t=>(0,a.Lk)("span",{key:t,class:(0,o.C4)(["star",{active:t<=r.rating}]),onClick:e=>l.setRating(t)},"★",10,xt))),64))])])]),(0,a.Lk)("div",At,[(0,a.bo)((0,a.Lk)("textarea",{"onUpdate:modelValue":e[0]||(e[0]=t=>r.feedbackText=t),class:"feedback-input",placeholder:"이 시간표에 대한 의견을 자유롭게 작성해주세요...",rows:"4",disabled:r.isSubmitting},null,8,Rt),[[s.Jo,r.feedbackText]]),r.feedbackError?((0,a.uX)(),(0,a.CE)("div",Ot,(0,o.v_)(r.feedbackError),1)):(0,a.Q3)("",!0),(0,a.Lk)("button",{class:"submit-button",onClick:e[1]||(e[1]=(...t)=>l.submitFeedback&&l.submitFeedback(...t)),disabled:r.isSubmitting},[r.isSubmitting?((0,a.uX)(),(0,a.CE)("span",Tt,"제출 중...")):((0,a.uX)(),(0,a.CE)("span",Xt,"피드백 제출"))],8,Ft)])])),(0,a.Lk)("div",{class:(0,o.C4)(["action-buttons",{"with-margin":r.feedbackSubmitted}])},[(0,a.Lk)("button",{class:"action-button restart-button",onClick:e[2]||(e[2]=(...t)=>l.onRestart&&l.onRestart(...t))}," 다시 시작 "),(0,a.Lk)("button",{class:"action-button save-button",onClick:e[3]||(e[3]=(...t)=>l.onSave&&l.onSave(...t)),disabled:r.isSaving},[r.isSaving?((0,a.uX)(),(0,a.CE)("span",Qt,e[23]||(e[23]=[(0,a.Lk)("span",{class:"loading-spinner"},null,-1),(0,a.eW)(" 저장 중... ")]))):((0,a.uX)(),(0,a.CE)("span",$t," 저장하기 "))],8,Mt)],2),r.saveSuccess?((0,a.uX)(),(0,a.CE)("div",jt,e[24]||(e[24]=[(0,a.Lk)("span",{class:"notification-icon"},"✓",-1),(0,a.eW)(" 시간표가 클립보드에 복사되었습니다! ")]))):(0,a.Q3)("",!0),r.saveError?((0,a.uX)(),(0,a.CE)("div",qt,[e[25]||(e[25]=(0,a.Lk)("span",{class:"notification-icon"},"⚠",-1)),(0,a.eW)(" "+(0,o.v_)(r.saveError),1)])):(0,a.Q3)("",!0)])])}var Wt=i(2125),Ht=i.n(Wt),Nt={name:"ScheduleComponent",props:{scheduleData:{type:Array,default:()=>[]},apiResult:{type:Object,default:null},userPreferences:{type:Object,default:()=>({grade:null,desired_credits:null,user_morning:!1,user_late:!1,user_lunch:!1,user_dayoff:!1,user_no_large_gap:!1,excluded_courses:[]})}},data(){return{rating:0,feedbackText:"",feedbackSubmitted:!1,optimizationSummary:null,isSubmitting:!1,feedbackError:null,isSaving:!1,saveSuccess:!1,saveError:null}},computed:{scheduleItems(){return this.scheduleData.length>0?this.scheduleData:this.generateDummySchedule()}},created(){this.$props.scheduleData&&this.$props.apiResult&&this.processOptimizationSummary(this.$props.apiResult)},methods:{onRestart(){this.$emit("restart")},setRating(t){this.rating=t},async submitFeedback(){try{if(this.isSubmitting=!0,this.feedbackError=null,0===this.rating)return void(this.feedbackError="별점을 선택해주세요.");const t={rating:this.rating,comment:this.feedbackText||"",schedule:this.scheduleData||[],preferences:this.userPreferences};console.log("피드백 제출 데이터:",t);const e=rt.getFullUrl(rt.endpoints.FEEDBACK),i=await fetch(e,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});if(!i.ok){const t=await i.json().catch((()=>({})));throw console.error("서버 오류 응답:",t),new Error(`서버 응답 오류: ${i.status}`)}const s=await i.json();console.log("피드백 제출 결과:",s),this.feedbackSubmitted=!0,setTimeout((()=>{const t=document.querySelector(".feedback-success");t&&t.scrollIntoView({behavior:"smooth"})}),100)}catch(t){console.error("피드백 제출 오류:",t),this.feedbackError="피드백 제출 중 오류가 발생했습니다. 나중에 다시 시도해주세요."}finally{this.isSubmitting=!1}},async onSave(){if(!this.isSaving){this.isSaving=!0,this.saveSuccess=!1,this.saveError=null;try{const t=document.querySelector(".timetable-container");if(!t)throw new Error("시간표 요소를 찾을 수 없습니다.");const e=await Ht()(t,{backgroundColor:"#ffffff",scale:2,useCORS:!0,logging:!1});e.toBlob((async t=>{try{if(navigator.clipboard&&navigator.clipboard.write){const e=new ClipboardItem({"image/png":t});await navigator.clipboard.write([e]),this.saveSuccess=!0,setTimeout((()=>{this.saveSuccess=!1}),3e3)}else{const e=URL.createObjectURL(t),i=document.createElement("a");i.href=e,i.download="내_시간표.png",document.body.appendChild(i),i.click(),document.body.removeChild(i),this.saveSuccess=!0,setTimeout((()=>{this.saveSuccess=!1}),3e3)}}catch(e){console.error("클립보드 저장 실패:",e),this.saveError="클립보드에 저장할 수 없습니다. 권한을 확인하거나 다시 시도해주세요."}finally{this.isSaving=!1}}),"image/png")}catch(t){console.error("이미지 생성 오류:",t),this.saveError="시간표 이미지를 생성할 수 없습니다. 다시 시도해주세요.",this.isSaving=!1}}},processOptimizationSummary(t){t&&t.selected&&(this.optimizationSummary={totalCredits:t.total_credits||0,totalCourses:t.selected.length||0,objectiveValue:t.objective_value||0,breakdown:t.breakdown||{priority:0,dev:0,mor:0,late:0,lunch:0,freeday:0,longgap:0}})},generateDummySchedule(){return[{day:1,startHour:9,duration:2,title:"공업수학",type:"study"},{day:1,startHour:13,duration:2,title:"대학영어",type:"study"},{day:2,startHour:10,duration:2,title:"일반물리",type:"study"},{day:3,startHour:14,duration:3,title:"종합설계",type:"project"},{day:4,startHour:9,duration:1,title:"러닝",type:"exercise"},{day:5,startHour:11,duration:2,title:"OR",type:"hobby"},{day:5,startHour:15,duration:2,title:"알바",type:"social"}]},calculateGridRow(t,e){const i=2*(t-9),s=30===e?1:0;return i+s+1},calculateGridSpan(t){return 2*t}}};const Vt=(0,k.A)(Nt,[["render",Pt],["__scopeId","data-v-e97701b0"]]);var Gt=Vt,Ut={name:"App",components:{StartComponent:y,GradeSelectComponent:O,QuestionComponent:W,OptimizationComponent:dt,ScheduleComponent:Gt},data(){return{currentView:"start",currentQuestionIndex:0,grade:null,desiredCredits:15,questions:["아침 수업을 선호하시나요?","저녁 시간대 수업은 피하고 싶으신가요?","점심 시간대(12~1시) 수업은 피하고 싶으신가요?","일주일에 최소 하루는 공강이 있었으면 좋겠나요?","수업 사이 긴 공강은 피하고 싶으신가요?"],answers:[],scheduleData:[],optimizationData:null,apiResult:null}},computed:{currentQuestion(){return this.questions[this.currentQuestionIndex]}},methods:{showGradeSelect(){this.currentView="grade-select"},handleInfoSubmission(t){this.grade=t.grade,this.desiredCredits=t.credits,this.currentView="question"},handleAnswer(t){this.answers.push({question:this.currentQuestion,answer:t}),this.currentQuestionIndex<this.questions.length-1?this.currentQuestionIndex++:(this.prepareOptimizationRequest(),this.currentView="optimization")},prepareOptimizationRequest(){this.optimizationData={grade:this.grade,desired_credits:this.desiredCredits,user_morning:this.getAnswerFor(0),user_late:this.getAnswerFor(1),user_lunch:this.getAnswerFor(2),user_dayoff:this.getAnswerFor(3),user_no_large_gap:this.getAnswerFor(4)},console.log("최적화 요청 데이터:",this.optimizationData)},getAnswerFor(t){return this.answers[t]?.answer||!1},showSchedule(t){this.apiResult=t,this.processScheduleResult(),this.currentView="schedule"},processScheduleResult(){if(this.apiResult){if(this.apiResult.processedScheduleData)return void(this.scheduleData=this.apiResult.processedScheduleData);if(this.apiResult.selected)return void(this.scheduleData=this.convertApiResultToScheduleData(this.apiResult.selected))}this.generateDummySchedule()},convertApiResultToScheduleData(t){const e=["study","project","exercise","hobby","social"];let i=[];return t.forEach(((t,s)=>{const a=e[s%e.length];t.schedule_info.forEach((e=>{const s=this.convertPeriodToTime(e.start),o=e.end-e.start+1,n=o/2;i.push({title:t.name,day:this.getDayNumber(e.day),startHour:s.hour,startMinute:s.minute,duration:n,type:a,location:e.location||""})}))})),i},mapPeriodToTime(t){const e=Math.floor((t-1)/2)+9,i=(t-1)%2*30;return{hour:e,minute:i}},convertPeriodToTime(t){const e=9,i=Math.floor((t-1)/2)+e,s=(t-1)%2*30;return{hour:i,minute:s}},mapScheduleToCellPosition(t,e,i){const s=this.getDayNumber(t),a=2*(e-1)+1,o=i-e+1,n=o;return{column:s,row:a,rowSpan:n}},calculateSchedulePosition(t,e){const i=this.mapPeriodToTime(t),s=e-t+1,a=Math.floor(2*(i.hour-9))+(30===i.minute?1:0)+1,o=s/2;return{startRow:a,duration:o}},getCourseType(t){const e=["study","project","exercise","hobby","social"],i=t.split("").reduce(((t,e)=>t+e.charCodeAt(0)),0);return e[i%e.length]},getDayNumber(t){const e={"월":1,"화":2,"수":3,"목":4,"금":5};return e[t]||1},getRandomType(){const t=["study","project","exercise","hobby","social"];return t[Math.floor(Math.random()*t.length)]},generateDummySchedule(){this.scheduleData=[{day:1,startHour:9,duration:3,title:"마케팅공학",type:"study",location:"A동 101호"},{day:2,startHour:9,duration:2,title:"재무관리",type:"project",location:"B동 203호"},{day:2,startHour:12,duration:2,title:"빅데이터분석",type:"exercise",location:"공대 305호"},{day:3,startHour:9,duration:3,title:"실험계획법",type:"hobby",location:"공학관 402호"},{day:3,startHour:12,duration:3,title:"생산관리",type:"social",location:"경영관 203호"},{day:4,startHour:9,duration:2,title:"재무관리",type:"project",location:"B동 203호"},{day:4,startHour:12,duration:2,title:"빅데이터분석",type:"exercise",location:"공대 305호"},{day:5,startHour:11,duration:3,title:"제조공학",type:"study",location:"공학관 301호"}]},restartApp(){this.currentView="start",this.currentQuestionIndex=0,this.grade=null,this.desiredCredits=15,this.answers=[],this.scheduleData=[],this.optimizationData=null,this.apiResult=null,window.scrollTo(0,0),console.log("앱이 초기화되었습니다.")}}};const Kt=(0,k.A)(Ut,[["render",m]]);var Bt=Kt;(0,s.Ef)(Bt).mount("#app")}},e={};function i(s){var a=e[s];if(void 0!==a)return a.exports;var o=e[s]={exports:{}};return t[s].call(o.exports,o,o.exports,i),o.exports}i.m=t,function(){var t=[];i.O=function(e,s,a,o){if(!s){var n=1/0;for(d=0;d<t.length;d++){s=t[d][0],a=t[d][1],o=t[d][2];for(var r=!0,l=0;l<s.length;l++)(!1&o||n>=o)&&Object.keys(i.O).every((function(t){return i.O[t](s[l])}))?s.splice(l--,1):(r=!1,o<n&&(n=o));if(r){t.splice(d--,1);var c=a();void 0!==c&&(e=c)}}return e}o=o||0;for(var d=t.length;d>0&&t[d-1][2]>o;d--)t[d]=t[d-1];t[d]=[s,a,o]}}(),function(){i.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return i.d(e,{a:e}),e}}(),function(){i.d=function(t,e){for(var s in e)i.o(e,s)&&!i.o(t,s)&&Object.defineProperty(t,s,{enumerable:!0,get:e[s]})}}(),function(){i.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}()}(),function(){i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)}}(),function(){var t={524:0};i.O.j=function(e){return 0===t[e]};var e=function(e,s){var a,o,n=s[0],r=s[1],l=s[2],c=0;if(n.some((function(e){return 0!==t[e]}))){for(a in r)i.o(r,a)&&(i.m[a]=r[a]);if(l)var d=l(i)}for(e&&e(s);c<n.length;c++)o=n[c],i.o(t,o)&&t[o]&&t[o][0](),t[o]=0;return i.O(d)},s=self["webpackChunktos"]=self["webpackChunktos"]||[];s.forEach(e.bind(null,0)),s.push=e.bind(null,s.push.bind(s))}();var s=i.O(void 0,[504],(function(){return i(4890)}));s=i.O(s)})();
//# sourceMappingURL=app.01c97af6.js.map